version: 1
defaults:
  model: frm-core
  max_tokens: 2048
  retrieval:
    top_k: 8
    namespace: "rfm"
  retention_days: 30

agents:
  orchestrator:
    policy: orchestration.v1
    children: [planner, researcher, synthesizer, critic, guardian, broker, interface, archivist, memory_keeper]
  planner:
    policy: plan.graph.v1
    tools: [memory.search, tool.invoke]
  researcher:
    policy: research.web.v1
    tools: [web.search, web.fetch, memory.search]
  synthesizer:
    policy: synth.compose.v1
    tools: [memory.search]
  critic:
    policy: critique.verify.v1
    tools: [ethics.check, web.search]
  guardian:
    policy: ethics.guard.v1
    tools: [ethics.check]
  broker:
    policy: tool.broker.v1
    tools: [*]   # broker can call any registered tool
  interface:
    policy: interface.api.v1
  archivist:
    policy: archive.save.v1
  memory_keeper:
    policy: memory.maintain.v1

tools:
  web.search:
    args_schema: { q: string, recency_days: integer?, limit: integer? }
  web.fetch:
    args_schema: { url: string, timeout_s: integer? }
  memory.search:
    args_schema: { query: string, top_k: integer?, filters: object? }
  tool.invoke:
    args_schema: { name: string, args: object }
  ethics.check:
    args_schema: { intent: string, payload: object }
